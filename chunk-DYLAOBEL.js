import{$ as w,A as l,B as v,C as R,D as z,E as B,F as h,G as O,I as Q,J as C,K as W,L as Z,P as J,Q as S,Y as y,Z as M,_ as P,a as I,aa as K,b as k,ba as L,ca as x,d as U,da as F,e as f,ea as E,f as V,fa as X,ga as Y,h as b,ha as tt,i as g,ia as et,j as q,ja as it,k as G,la as ot,m as p,ma as j,n as c,oa as st,pa as rt,qa as nt,r as H,ra as lt,s as m,t as _,u as n,v as s,w as d,x as A,y as u,z as $}from"./chunk-L34LB2Y4.js";import"./chunk-MON7YFGF.js";var pt={production:!1,apiUrl:"https://www.api.saktech.online/wp-json/wp/v2/"};var T=(()=>{class o{constructor(t){this.httpcli=t,this.baseUrl=pt.apiUrl,this.username="od5bp",this.appPassword="wxNQ vGTr HET4 W61D 2z0L zV0Z",this.authHeader="Basic "+btoa(this.username+":"+this.appPassword)}getPosts(){return this.httpcli.get(`${this.baseUrl}posts`)}getSinglePost(t){return this.httpcli.get(`${this.baseUrl}posts/${t}`)}postQuickUpdate(t,e){let i=`${this.baseUrl}posts/${t}`,r=new C({"Content-Type":"application/json",Authorization:this.authHeader});return this.httpcli.put(i,e,{headers:r})}postUpdate(t,e){let i=`${this.baseUrl}posts/${t}`,r=new C({"Content-Type":"application/json",Authorization:this.authHeader});return this.httpcli.put(i,e,{headers:r})}postCategoryList(){let t=`${this.baseUrl}categories`;return this.httpcli.get(t).pipe(I(e=>e.map(i=>({id:i.id,name:i.name,slug:i.slug,description:i.description,count:i.count}))))}postStatusList(){let t=`${this.baseUrl}statuses`,e=new C({"Content-Type":"application/json",Authorization:this.authHeader});return this.httpcli.get(t,{headers:e}).pipe(k(i=>console.log("Fetched statuses:",Object.keys(i))),I(i=>Object.keys(i).map(r=>({name:i[r].name,public:i[r].public,protected:i[r].protected,private:i[r].private,queryable:i[r].queryable,slug:i[r].slug}))))}static{this.\u0275fac=function(e){return new(e||o)(V(W))}}static{this.\u0275prov=U({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var bt=()=>({width:"100%"}),gt=()=>({width:"50rem"}),_t=o=>["edit-post",o];function vt(o,D){o&1&&(n(0,"tr")(1,"th"),l(2,"ID"),s(),n(3,"th"),l(4,"Title"),s(),n(5,"th"),l(6,"slug"),s(),n(7,"th"),l(8,"Actions"),s()())}function Ct(o,D){if(o&1){let t=A();n(0,"tr")(1,"td"),l(2),s(),n(3,"td"),l(4),s(),n(5,"td"),l(6),s(),n(7,"td")(8,"a",10),u("click",function(){let i=q(t).$implicit,r=$();return G(r.showDialog(i.id))}),d(9,"i",11),s(),n(10,"a",12),l(11,"Edit"),s()()()}if(o&2){let t=D.$implicit;p(2),v(t.id),p(2),v(t.title),p(2),v(t.slug),p(4),m("routerLink",O(4,_t,t.id))}}var mt=(()=>{class o{constructor(t){this.postser=t,this.PostListdata=[],this.PostsList=[],this.visible=!1,this.postquickedit=new K({post_title:new L(""),post_id:new L("")})}ngOnInit(){this.postser.getPosts().subscribe(t=>{this.PostsList=t,this.createIdSlugArray()})}createIdSlugArray(){this.PostListdata=this.PostsList.map(t=>({id:t.id,slug:t.slug,title:t.title.rendered}))}showDialog(t){this.postser.getSinglePost(t).subscribe({next:e=>{this.postquickedit.patchValue({post_title:e?.title?.rendered||"",post_id:e.id}),this.visible=!0},error:e=>{console.error("Failed to fetch the post:",e)}})}onSubmit(){let t={id:this.postquickedit.value.post_id,title:this.postquickedit.value.post_title};this.postser.postQuickUpdate(this.postquickedit.value.post_id,t).subscribe(e=>{console.log(e)})}static{this.\u0275fac=function(e){return new(e||o)(c(T))}}static{this.\u0275cmp=b({type:o,selectors:[["app-postlist"]],decls:11,vars:9,consts:[[1,"card","m-2"],["styleClass","p-datatable-gridlines",1,"custom-table",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["header","Post Quick Edit",3,"visibleChange","modal","visible"],[3,"ngSubmit","formGroup"],["for","ptitle"],["id","ptitle","type","text","formControlName","post_title"],["id","post_id","type","hidden","formControlName","post_id"],["label","Submit","type","submit"],[3,"click"],[1,"pi","pi-file-edit"],[3,"routerLink"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"p-table",1),H(2,vt,9,0,"ng-template",2)(3,Ct,12,6,"ng-template",3),s()(),n(4,"p-dialog",4),B("visibleChange",function(a){return z(i.visible,a)||(i.visible=a),a}),n(5,"form",5),u("ngSubmit",function(){return i.onSubmit()}),n(6,"label",6),l(7,"Post Title:"),s(),d(8,"input",7)(9,"input",8)(10,"p-button",9),s()()),e&2&&(p(),m("value",i.PostListdata)("tableStyle",h(7,bt)),p(3),_(h(8,gt)),m("modal",!0),R("visible",i.visible),p(),m("formGroup",i.postquickedit))},dependencies:[ot,S,J,et,st,x,y,P,w,F,E]})}}return o})();var St=()=>({height:"320px",width:"100%"}),dt=(()=>{class o{constructor(t,e,i){this.fb=t,this.route=e,this.postservice=i,this.category_list=[],this.post_status=[],this.categories=[],this.postForm=this.fb.group({post_title:["",M.required],post_content:["",M.required],post_id:[""],select_status:[""],selectedCategory:[""]}),this.postservice.postStatusList().subscribe(r=>{this.post_status=r.map(a=>({name:a.name,code:a.slug}))}),this.postservice.postCategoryList().subscribe(r=>{this.categories=r,this.category_list=this.categories.map(a=>({name:a.name,code:a.id})),this.loadPosts()})}ngOnInit(){}loadPosts(){this.postId=Number(this.route.snapshot.paramMap.get("id"))||0,console.log("Hai",this.post_status[2]),this.postservice.getSinglePost(this.postId).subscribe({next:t=>{let e=this.category_list.filter(r=>t.categories?.includes(r.code)),i=this.post_status.find(r=>r.code===t.status);this.postForm.patchValue({post_title:t?.title?.rendered||"",post_content:t?.content?.rendered||"",post_id:t.id,select_status:i,selectedCategory:e})}})}onSubmit(){if(this.postForm.valid){let t={title:this.postForm.value.post_title,id:this.postForm.value.post_id,content:this.postForm.value.post_content,status:this.postForm.value.select_status.code,categories:this.postForm.value.selectedCategory.map(e=>e.code)};this.postservice.postUpdate(this.postForm.value.post_id,t).subscribe(e=>{console.log(e)})}}static{this.\u0275fac=function(e){return new(e||o)(c(X),c(it),c(T))}}static{this.\u0275cmp=b({type:o,selectors:[["app-postedit"]],decls:22,vars:7,consts:[[1,"card","m-2"],[3,"ngSubmit","formGroup"],[1,"field","grid"],["for","post_title",1,"col-fixed",2,"width","100px"],["id","post_title","formControlName","post_title","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary"],["for","post_content",1,"col-fixed",2,"width","100px"],["formControlName","post_content"],["formControlName","selectedCategory","optionLabel","name","styleClass","w-full",3,"options","multiple"],["for","select_status",1,"col-fixed",2,"width","100px"],["formControlName","select_status","optionLabel","name","placeholder","Select Status","styleClass","w-full",3,"options"],["type","hidden","formControlName","post_id"],["type","submit","label","Submit"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"h2"),l(2,"Post Edit"),s(),n(3,"form",1),u("ngSubmit",function(){return i.onSubmit()}),n(4,"div",2)(5,"label",3),l(6,"Post Title:"),s(),d(7,"input",4),s(),n(8,"div",2)(9,"label",5),l(10,"Post Content:"),s(),d(11,"p-editor",6),s(),n(12,"div",2)(13,"label",5),l(14,"Post Categories:"),s(),d(15,"p-listbox",7),s(),n(16,"div",2)(17,"label",8),l(18,"Select status:"),s(),d(19,"p-dropdown",9),s(),d(20,"input",10)(21,"p-button",11),s()()),e&2&&(p(3),m("formGroup",i.postForm),p(8),_(h(6,St)),p(4),m("options",i.category_list)("multiple",!0),p(4),m("options",i.post_status))},dependencies:[S,rt,nt,tt,x,y,P,w,F,E]})}}return o})();var yt=[{path:"",component:mt},{path:"edit-post/:id",component:dt}],ct=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=g({type:o})}static{this.\u0275inj=f({imports:[j.forChild(yt),j]})}}return o})();var Kt=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=g({type:o})}static{this.\u0275inj=f({imports:[Q,ct,lt,Z,Y]})}}return o})();export{Kt as PostsModule};
