import{$ as J,A as v,B as H,C as R,D as B,E as u,F as z,H as Q,I as M,J as W,K as O,O as Z,P as _,X as C,Y as T,Z as S,_ as P,a as I,aa as k,ba as y,c as j,ca as x,d as h,da as w,e as U,ea as K,fa as X,g as f,ga as Y,h as b,ha as tt,i as V,j as q,ja as et,ka as L,l as p,m as d,ma as it,na as ot,oa as st,pa as rt,q as G,r as a,s as g,t as r,u as s,v as m,w as $,x as c,y as A,z as n}from"./chunk-ZREEV6IP.js";import"./chunk-MON7YFGF.js";var nt={production:!1,apiUrl:"https://www.api.saktech.online/wp-json/wp/v2/"};var F=(()=>{class i{constructor(t){this.httpcli=t,this.baseUrl=nt.apiUrl,this.username="od5bp",this.appPassword="wxNQ vGTr HET4 W61D 2z0L zV0Z",this.authHeader="Basic "+btoa(this.username+":"+this.appPassword)}getPosts(){return this.httpcli.get(`${this.baseUrl}posts`)}getSinglePost(t){return this.httpcli.get(`${this.baseUrl}posts/${t}`)}postQuickUpdate(t,e){let o=`${this.baseUrl}posts/${t}`,l=new M({"Content-Type":"application/json",Authorization:this.authHeader});return this.httpcli.put(o,e,{headers:l})}postUpdate(t,e){let o=`${this.baseUrl}posts/${t}`,l=new M({"Content-Type":"application/json",Authorization:this.authHeader});return this.httpcli.put(o,e,{headers:l})}postCategoryList(){let t=`${this.baseUrl}categories`;return this.httpcli.get(t).pipe(I(e=>e.map(o=>({id:o.id,name:o.name,slug:o.slug,description:o.description,count:o.count}))))}postStatusList(){let t=`${this.baseUrl}statuses`;return this.httpcli.get(t).pipe(I(e=>e.map(o=>({name:o.name,public:o.public,protected:o.protected,private:o.private,queryable:o.queryable,slug:o.slug}))))}static{this.\u0275fac=function(e){return new(e||i)(U(W))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ht=()=>({width:"100%"}),ft=()=>({width:"50rem"}),bt=i=>["edit-post",i];function gt(i,D){i&1&&(r(0,"tr")(1,"th"),n(2,"ID"),s(),r(3,"th"),n(4,"Title"),s(),r(5,"th"),n(6,"slug"),s(),r(7,"th"),n(8,"Actions"),s()())}function vt(i,D){if(i&1){let t=$();r(0,"tr")(1,"td"),n(2),s(),r(3,"td"),n(4),s(),r(5,"td"),n(6),s(),r(7,"td")(8,"a",10),c("click",function(){let o=V(t).$implicit,l=A();return q(l.showDialog(o.id))}),m(9,"i",11),s(),r(10,"a",12),n(11,"Edit"),s()()()}if(i&2){let t=D.$implicit;p(2),v(t.id),p(2),v(t.title),p(2),v(t.slug),p(4),a("routerLink",z(4,bt,t.id))}}var lt=(()=>{class i{constructor(t){this.postser=t,this.PostListdata=[],this.PostsList=[],this.visible=!1,this.postquickedit=new J({post_title:new k(""),post_id:new k("")})}ngOnInit(){this.postser.getPosts().subscribe(t=>{this.PostsList=t,this.createIdSlugArray()})}createIdSlugArray(){this.PostListdata=this.PostsList.map(t=>({id:t.id,slug:t.slug,title:t.title.rendered}))}showDialog(t){this.postser.getSinglePost(t).subscribe({next:e=>{this.postquickedit.patchValue({post_title:e?.title?.rendered||"",post_id:e.id}),this.visible=!0},error:e=>{console.error("Failed to fetch the post:",e)}})}onSubmit(){let t={id:this.postquickedit.value.post_id,title:this.postquickedit.value.post_title};this.postser.postQuickUpdate(this.postquickedit.value.post_id,t).subscribe(e=>{console.log(e)})}static{this.\u0275fac=function(e){return new(e||i)(d(F))}}static{this.\u0275cmp=f({type:i,selectors:[["app-postlist"]],decls:11,vars:9,consts:[[1,"card","m-2"],["styleClass","p-datatable-gridlines",1,"custom-table",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["header","Post Quick Edit",3,"visibleChange","modal","visible"],[3,"ngSubmit","formGroup"],["for","ptitle"],["id","ptitle","type","text","formControlName","post_title"],["id","post_id","type","hidden","formControlName","post_id"],["label","Submit","type","submit"],[3,"click"],[1,"pi","pi-file-edit"],[3,"routerLink"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"p-table",1),G(2,gt,9,0,"ng-template",2)(3,vt,12,6,"ng-template",3),s()(),r(4,"p-dialog",4),B("visibleChange",function(N){return R(o.visible,N)||(o.visible=N),N}),r(5,"form",5),c("ngSubmit",function(){return o.onSubmit()}),r(6,"label",6),n(7,"Post Title:"),s(),m(8,"input",7)(9,"input",8)(10,"p-button",9),s()()),e&2&&(p(),a("value",o.PostListdata)("tableStyle",u(7,ht)),p(3),g(u(8,ft)),a("modal",!0),H("visible",o.visible),p(),a("formGroup",o.postquickedit))},dependencies:[et,_,Z,Y,it,y,C,S,P,x,w]})}}return i})();var _t=()=>({height:"320px",width:"100%"}),at=(()=>{class i{constructor(t,e,o){this.fb=t,this.route=e,this.postservice=o,this.cities=[],this.categories=[],this.postForm=this.fb.group({post_title:["",T.required],post_content:["",T.required],post_id:[""]})}ngOnInit(){this.postservice.postCategoryList().subscribe(t=>{this.categories=t,console.log(this.categories),this.cities=this.categories.map(e=>({name:e.name,code:e.slug}))}),this.postId=Number(this.route.snapshot.paramMap.get("id"))||0,this.postservice.getSinglePost(this.postId).subscribe({next:t=>{this.postForm.patchValue({post_title:t?.title?.rendered||"",post_content:t?.content?.rendered||"",post_id:t.id})}})}onSubmit(){if(this.postForm.valid){let t={title:this.postForm.value.post_title,id:this.postForm.value.post_id};this.postservice.postUpdate(this.postForm.value.post_id,t).subscribe(e=>{console.log(e)})}}static{this.\u0275fac=function(e){return new(e||i)(d(K),d(tt),d(F))}}static{this.\u0275cmp=f({type:i,selectors:[["app-postedit"]],decls:21,vars:6,consts:[[1,"card","m-2"],[3,"ngSubmit","formGroup"],[1,"field","grid"],["for","post_title",1,"col-fixed",2,"width","100px"],["id","post_title","formControlName","post_title","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary"],["for","post_content",1,"col-fixed",2,"width","100px"],["formControlName","post_content"],["formControlName","selectedCities","optionLabel","name","styleClass","w-full",3,"options","multiple"],["for","select_status",1,"col-fixed",2,"width","100px"],["type","hidden","formControlName","post_id"],["type","submit","label","Submit"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"h2"),n(2,"Post Edit"),s(),r(3,"form",1),c("ngSubmit",function(){return o.onSubmit()}),r(4,"div",2)(5,"label",3),n(6,"Post Title:"),s(),m(7,"input",4),s(),r(8,"div",2)(9,"label",5),n(10,"Post Content:"),s(),m(11,"p-editor",6),s(),r(12,"div",2)(13,"label",5),n(14,"Post Categories:"),s(),m(15,"p-listbox",7),s(),r(16,"div",2)(17,"label",8),n(18,"Select status:"),s()(),m(19,"input",9)(20,"p-button",10),s()()),e&2&&(p(3),a("formGroup",o.postForm),p(8),g(u(5,_t)),p(4),a("options",o.cities)("multiple",!0))},dependencies:[_,ot,st,y,C,S,P,x,w]})}}return i})();var Ct=[{path:"",component:lt},{path:"edit-post/:id",component:at}],mt=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=b({type:i})}static{this.\u0275inj=h({imports:[L.forChild(Ct),L]})}}return i})();var Ot=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=b({type:i})}static{this.\u0275inj=h({imports:[Q,mt,rt,O,X]})}}return i})();export{Ot as PostsModule};
