import{$ as M,A as p,B as w,C as $,D as B,E as O,F as u,G as z,I as Q,J as C,K as W,L as Z,P as J,Q as K,R as X,S as Y,_ as S,a as I,aa as y,b as D,ba as P,ca as tt,d as U,da as k,e as g,ea as x,f as R,fa as F,ga as E,h as v,ha as et,i as _,ia as it,j as V,ja as ot,k as q,ka as st,la as rt,m as l,ma as nt,n as d,oa as pt,pa as j,r as G,ra as lt,s as m,sa as at,t as f,ta as mt,u as n,v as s,va as ct,w as a,x as H,y as b,z as A}from"./chunk-5VFKSMDA.js";import"./chunk-MON7YFGF.js";var dt={production:!1,apiUrl:"https://www.api.saktech.online/wp-json/wp/v2/"};var N=(()=>{class o{constructor(t){this.httpcli=t,this.baseUrl=dt.apiUrl,this.username="od5bp",this.appPassword="wxNQ vGTr HET4 W61D 2z0L zV0Z",this.authHeader="Basic "+btoa(this.username+":"+this.appPassword)}getPosts(){return this.httpcli.get(`${this.baseUrl}posts`)}getSinglePost(t){return this.httpcli.get(`${this.baseUrl}posts/${t}`)}postQuickUpdate(t,e){let i=`${this.baseUrl}posts/${t}`,r=new C({"Content-Type":"application/json",Authorization:this.authHeader});return this.httpcli.put(i,e,{headers:r})}postUpdate(t,e){let i=`${this.baseUrl}posts/${t}`,r=new C({"Content-Type":"application/json",Authorization:this.authHeader});return this.httpcli.put(i,e,{headers:r})}postCategoryList(){let t=`${this.baseUrl}categories`;return this.httpcli.get(t).pipe(I(e=>e.map(i=>({id:i.id,name:i.name,slug:i.slug,description:i.description,count:i.count}))))}postStatusList(){let t=`${this.baseUrl}statuses`,e=new C({"Content-Type":"application/json",Authorization:this.authHeader});return this.httpcli.get(t,{headers:e}).pipe(D(i=>console.log("Fetched statuses:",Object.keys(i))),I(i=>Object.keys(i).map(r=>({name:i[r].name,public:i[r].public,protected:i[r].protected,private:i[r].private,queryable:i[r].queryable,slug:i[r].slug}))))}static{this.\u0275fac=function(e){return new(e||o)(R(W))}}static{this.\u0275prov=U({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Ct=()=>({"min-width":"50rem"}),St=()=>[10,25,50],yt=()=>({width:"25rem"}),Pt=()=>({"background-color":"#9c27b0",border:"none"}),xt=o=>["edit-post",o];function Ft(o,L){o&1&&(n(0,"tr",12)(1,"th",13),p(2,"ID"),s(),n(3,"th",14),p(4,"Title"),s(),n(5,"th",15),p(6,"Slug"),s(),n(7,"th",16),p(8,"Actions"),s()())}function Et(o,L){if(o&1){let t=H();n(0,"tr",12)(1,"td",17),p(2),s(),n(3,"td",18),p(4),s(),n(5,"td",19),p(6),s(),n(7,"td",17)(8,"div",20)(9,"button",21),b("click",function(){let i=V(t).$implicit,r=A();return q(r.showDialog(i.id))}),s(),a(10,"button",22),s()()()}if(o&2){let t=L.$implicit;l(2),w(t.id),l(2),w(t.title),l(2),w(t.slug),l(4),m("routerLink",z(4,xt,t.id))}}var ht=(()=>{class o{constructor(t){this.postser=t,this.PostListdata=[],this.PostsList=[],this.visible=!1,this.postquickedit=new tt({post_title:new k(""),post_id:new k("")})}ngOnInit(){this.postser.getPosts().subscribe(t=>{this.PostsList=t,this.createIdSlugArray()})}createIdSlugArray(){this.PostListdata=this.PostsList.map(t=>({id:t.id,slug:t.slug,title:t.title.rendered}))}showDialog(t){this.postser.getSinglePost(t).subscribe({next:e=>{this.postquickedit.patchValue({post_title:e?.title?.rendered||"",post_id:e.id}),this.visible=!0},error:e=>{console.error("Failed to fetch the post:",e)}})}onSubmit(){let t={id:this.postquickedit.value.post_id,title:this.postquickedit.value.post_title};this.postser.postQuickUpdate(this.postquickedit.value.post_id,t).subscribe(e=>{console.log(e)})}static{this.\u0275fac=function(e){return new(e||o)(d(N))}}static{this.\u0275cmp=v({type:o,selectors:[["app-postlist"]],decls:13,vars:18,consts:[[1,"card","surface-0","shadow-1","border-round","m-2"],["styleClass","p-datatable-sm p-datatable-gridlines p-datatable-striped","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","responsiveLayout","scroll",3,"value","tableStyle","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["header","Post Quick Edit",3,"visibleChange","modal","visible","closable"],[3,"ngSubmit","formGroup"],[1,"field"],["for","ptitle",1,"block","mb-2"],["id","ptitle","type","text","pInputText","","formControlName","post_title",1,"w-full"],["id","post_id","type","hidden","formControlName","post_id"],[1,"mt-3","text-right"],["pButton","","type","submit","label","Submit"],[1,"flex","w-full"],[1,"flex-shrink-0","w-2","text-left"],[1,"flex-grow-1","w-5","text-left"],[1,"flex-grow-1","w-4","text-left"],[1,"flex-shrink-0","w-2","text-center"],[1,"flex-shrink-0","w-2"],[1,"flex-grow-1","w-5"],[1,"flex-grow-1","w-4"],[1,"flex","gap-2","justify-content-center"],["pButton","","pRipple","","type","button","icon","pi pi-file-edit","pTooltip","Quick Edit","tooltipPosition","top",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-pencil","pTooltip","Full Edit","tooltipPosition","top",1,"p-button-rounded","p-button-text",3,"routerLink"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"p-table",1),G(2,Ft,9,0,"ng-template",2)(3,Et,11,6,"ng-template",3),s()(),n(4,"p-dialog",4),O("visibleChange",function(c){return B(i.visible,c)||(i.visible=c),c}),n(5,"form",5),b("ngSubmit",function(){return i.onSubmit()}),n(6,"div",6)(7,"label",7),p(8,"Post Title:"),s(),a(9,"input",8),s(),a(10,"input",9),n(11,"div",10),a(12,"button",11),s()()()),e&2&&(l(),m("value",i.PostListdata)("tableStyle",u(14,Ct))("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",u(15,St)),l(3),f(u(16,yt)),m("modal",!0),$("visible",i.visible),m("closable",!0),l(),m("formGroup",i.postquickedit),l(7),f(u(17,Pt)))},dependencies:[pt,X,K,rt,ot,lt,x,S,y,P,F,E]})}}return o})();var Tt=()=>({height:"320px",width:"100%"}),ft=(()=>{class o{constructor(t,e,i,r){this.fb=t,this.route=e,this.postservice=i,this.messageService=r,this.category_list=[],this.post_status=[],this.categories=[],this.postForm=this.fb.group({post_title:["",M.required],post_content:["",M.required],post_id:[""],select_status:[""],selectedCategory:[""]}),this.postservice.postStatusList().subscribe(c=>{this.post_status=c.map(h=>({name:h.name,code:h.slug}))}),this.postservice.postCategoryList().subscribe(c=>{this.categories=c,this.category_list=this.categories.map(h=>({name:h.name,code:h.id})),this.loadPosts()})}ngOnInit(){}loadPosts(){this.postId=Number(this.route.snapshot.paramMap.get("id"))||0,console.log("Hai",this.post_status[2]),this.postservice.getSinglePost(this.postId).subscribe({next:t=>{let e=this.category_list.filter(r=>t.categories?.includes(r.code)),i=this.post_status.find(r=>r.code===t.status);this.postForm.patchValue({post_title:t?.title?.rendered||"",post_content:t?.content?.rendered||"",post_id:t.id,select_status:i,selectedCategory:e})}})}onSubmit(){if(this.postForm.valid){let t={title:this.postForm.value.post_title,id:this.postForm.value.post_id,content:this.postForm.value.post_content,status:this.postForm.value.select_status.code,categories:this.postForm.value.selectedCategory.map(e=>e.code)};this.postservice.postUpdate(this.postForm.value.post_id,t).subscribe(e=>{console.log(e),this.showSuccess()})}}showSuccess(){this.messageService.add({severity:"success",summary:"Post Updated",detail:"Post Updated Successfully"})}static{this.\u0275fac=function(e){return new(e||o)(d(et),d(nt),d(N),d(J))}}static{this.\u0275cmp=v({type:o,selectors:[["app-postedit"]],decls:22,vars:7,consts:[[1,"card","m-2"],[3,"ngSubmit","formGroup"],[1,"field","grid"],["for","post_title",1,"col-fixed",2,"width","100px"],["id","post_title","formControlName","post_title","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary"],["for","post_content",1,"col-fixed",2,"width","100px"],["formControlName","post_content"],["formControlName","selectedCategory","optionLabel","name","styleClass","w-full",3,"options","multiple"],["for","select_status",1,"col-fixed",2,"width","100px"],["formControlName","select_status","optionLabel","name","placeholder","Select Status","styleClass","w-full",3,"options"],["type","hidden","formControlName","post_id"],["type","submit","label","Submit"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"h2"),p(2,"Post Edit"),s(),n(3,"form",1),b("ngSubmit",function(){return i.onSubmit()}),n(4,"div",2)(5,"label",3),p(6,"Post Title:"),s(),a(7,"input",4),s(),n(8,"div",2)(9,"label",5),p(10,"Post Content:"),s(),a(11,"p-editor",6),s(),n(12,"div",2)(13,"label",5),p(14,"Post Categories:"),s(),a(15,"p-listbox",7),s(),n(16,"div",2)(17,"label",8),p(18,"Select status:"),s(),a(19,"p-dropdown",9),s(),a(20,"input",10)(21,"p-button",11),s()()),e&2&&(l(3),m("formGroup",i.postForm),l(8),f(u(6,Tt)),l(4),m("options",i.category_list)("multiple",!0),l(4),m("options",i.post_status))},dependencies:[Y,at,mt,st,x,S,y,P,F,E]})}}return o})();var Nt=[{path:"",component:ht},{path:"edit-post/:id",component:ft}],bt=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=_({type:o})}static{this.\u0275inj=g({imports:[j.forChild(Nt),j]})}}return o})();var se=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=_({type:o})}static{this.\u0275inj=g({imports:[Q,bt,ct,Z,it]})}}return o})();export{se as PostsModule};
