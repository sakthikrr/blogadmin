import{$ as _,A as n,B as h,C as U,D as A,E as H,F,G as R,I as $,J as B,K as Q,L as W,P as z,Q as O,Y as g,Z as N,_ as b,aa as Z,ba as I,ca as v,d as k,da as C,e as c,ea as P,f as T,fa as J,ga as K,h as u,ha as X,i as f,j as D,ja as Y,k as j,la as tt,m as p,ma as E,n as a,oa as et,pa as it,r as L,s as l,t as V,u as o,v as s,w as m,x as G,y as x,z as q}from"./chunk-64RYO6RC.js";var ot={production:!1,apiUrl:"https://www.api.saktech.online/wp-json/wp/v2/"};var y=(()=>{class e{constructor(t){this.httpcli=t,this.baseUrl=ot.apiUrl,this.username="od5bp",this.appPassword="wxNQ vGTr HET4 W61D 2z0L zV0Z",this.authHeader="Basic "+btoa(this.username+":"+this.appPassword)}getPosts(){return this.httpcli.get(`${this.baseUrl}posts`)}getSinglePost(t){return this.httpcli.get(`${this.baseUrl}posts/${t}`)}postQuickUpdate(t,i){let r=`${this.baseUrl}posts/${t}`,d=new B({"Content-Type":"application/json",Authorization:this.authHeader});return this.httpcli.put(r,i,{headers:d})}static{this.\u0275fac=function(i){return new(i||e)(T(Q))}}static{this.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var mt=()=>({width:"100%"}),dt=()=>({width:"50rem"}),ct=e=>["edit-post",e];function ut(e,M){e&1&&(o(0,"tr")(1,"th"),n(2,"ID"),s(),o(3,"th"),n(4,"Title"),s(),o(5,"th"),n(6,"slug"),s(),o(7,"th"),n(8,"Actions"),s()())}function ft(e,M){if(e&1){let t=G();o(0,"tr")(1,"td"),n(2),s(),o(3,"td"),n(4),s(),o(5,"td"),n(6),s(),o(7,"td")(8,"a",10),x("click",function(){let r=D(t).$implicit,d=q();return j(d.showDialog(r.id))}),m(9,"i",11),s(),o(10,"a",12),n(11,"Edit"),s()()()}if(e&2){let t=M.$implicit;p(2),h(t.id),p(2),h(t.title),p(2),h(t.slug),p(4),l("routerLink",R(4,ct,t.id))}}var rt=(()=>{class e{constructor(t){this.postser=t,this.PostListdata=[],this.PostsList=[],this.visible=!1,this.postquickedit=new Z({post_title:new I(""),post_id:new I("")})}ngOnInit(){this.postser.getPosts().subscribe(t=>{this.PostsList=t,this.createIdSlugArray()})}createIdSlugArray(){this.PostListdata=this.PostsList.map(t=>({id:t.id,slug:t.slug,title:t.title.rendered}))}showDialog(t){this.postser.getSinglePost(t).subscribe({next:i=>{this.postquickedit.patchValue({post_title:i?.title?.rendered||"",post_id:i.id}),this.visible=!0},error:i=>{console.error("Failed to fetch the post:",i)}})}onSubmit(){let t={id:this.postquickedit.value.post_id,title:this.postquickedit.value.post_title};this.postser.postQuickUpdate(this.postquickedit.value.post_id,t).subscribe(i=>{console.log(i)})}static{this.\u0275fac=function(i){return new(i||e)(a(y))}}static{this.\u0275cmp=u({type:e,selectors:[["app-postlist"]],decls:11,vars:9,consts:[[1,"card","m-2"],["styleClass","p-datatable-gridlines",1,"custom-table",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["header","Post Quick Edit",3,"visibleChange","modal","visible"],[3,"ngSubmit","formGroup"],["for","ptitle"],["id","ptitle","type","text","formControlName","post_title"],["id","post_id","type","hidden","formControlName","post_id"],["label","Submit","type","submit"],[3,"click"],[1,"pi","pi-file-edit"],[3,"routerLink"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"p-table",1),L(2,ut,9,0,"ng-template",2)(3,ft,12,6,"ng-template",3),s()(),o(4,"p-dialog",4),H("visibleChange",function(w){return A(r.visible,w)||(r.visible=w),w}),o(5,"form",5),x("ngSubmit",function(){return r.onSubmit()}),o(6,"label",6),n(7,"Post Title:"),s(),m(8,"input",7)(9,"input",8)(10,"p-button",9),s()()),i&2&&(p(),l("value",r.PostListdata)("tableStyle",F(7,mt)),p(3),V(F(8,dt)),l("modal",!0),U("visible",r.visible),p(),l("formGroup",r.postquickedit))},dependencies:[tt,O,z,X,et,v,g,b,_,C,P]})}}return e})();var nt=(()=>{class e{constructor(t,i,r){this.fb=t,this.route=i,this.postservice=r,this.postForm=this.fb.group({post_title:["",N.required],post_content:["",N.required]})}ngOnInit(){this.postId=Number(this.route.snapshot.paramMap.get("id"))||0,this.postservice.getSinglePost(this.postId).subscribe({next:t=>{this.postForm.patchValue({post_title:t?.title?.rendered||"",post_content:t?.content?.rendered||""})}})}static{this.\u0275fac=function(i){return new(i||e)(a(J),a(Y),a(y))}}static{this.\u0275cmp=u({type:e,selectors:[["app-postedit"]],decls:9,vars:2,consts:[[3,"formGroup"],["for","post_title"],["id","post_title","formControlName","post_title","type","text"],["for","post_content"],["id","post_content","formControlName","post_content"],["type","submit",3,"disabled"]],template:function(i,r){i&1&&(o(0,"form",0)(1,"label",1),n(2,"Post Title:"),s(),m(3,"input",2),o(4,"label",3),n(5,"Post Content:"),s(),m(6,"textarea",4),o(7,"button",5),n(8,"Submit"),s()()),i&2&&(l("formGroup",r.postForm),p(7),l("disabled",r.postForm.invalid))},dependencies:[v,g,b,_,C,P]})}}return e})();var ht=[{path:"",component:rt},{path:"edit-post/:id",component:nt}],pt=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=f({type:e})}static{this.\u0275inj=c({imports:[E.forChild(ht),E]})}}return e})();var Ht=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=f({type:e})}static{this.\u0275inj=c({imports:[$,pt,it,W,K]})}}return e})();export{Ht as PostsModule};
