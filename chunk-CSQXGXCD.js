import{$ as C,A as n,B as b,C as H,D as $,E as R,F as N,G as B,I as z,J as E,K as Q,L as W,P as O,Q as g,Y as _,Z as I,_ as v,aa as Z,ba as T,ca as S,d as D,da as y,e as u,ea as P,f as j,fa as J,ga as K,h as f,ha as X,i as h,ia as Y,j as L,k as U,ka as tt,la as M,m as p,n as d,na as et,oa as it,r as V,s as a,t as G,u as r,v as o,w as m,x as q,y as c,z as A}from"./chunk-YZS4AJFJ.js";var ot={production:!1,apiUrl:"https://www.api.saktech.online/wp-json/wp/v2/"};var w=(()=>{class e{constructor(t){this.httpcli=t,this.baseUrl=ot.apiUrl,this.username="od5bp",this.appPassword="wxNQ vGTr HET4 W61D 2z0L zV0Z",this.authHeader="Basic "+btoa(this.username+":"+this.appPassword)}getPosts(){return this.httpcli.get(`${this.baseUrl}posts`)}getSinglePost(t){return this.httpcli.get(`${this.baseUrl}posts/${t}`)}postQuickUpdate(t,i){let s=`${this.baseUrl}posts/${t}`,l=new E({"Content-Type":"application/json",Authorization:this.authHeader});return this.httpcli.put(s,i,{headers:l})}postUpdate(t,i){let s=`${this.baseUrl}posts/${t}`,l=new E({"Content-Type":"application/json",Authorization:this.authHeader});return this.httpcli.put(s,i,{headers:l})}static{this.\u0275fac=function(i){return new(i||e)(j(Q))}}static{this.\u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var dt=()=>({width:"100%"}),ct=()=>({width:"50rem"}),ut=e=>["edit-post",e];function ft(e,k){e&1&&(r(0,"tr")(1,"th"),n(2,"ID"),o(),r(3,"th"),n(4,"Title"),o(),r(5,"th"),n(6,"slug"),o(),r(7,"th"),n(8,"Actions"),o()())}function ht(e,k){if(e&1){let t=q();r(0,"tr")(1,"td"),n(2),o(),r(3,"td"),n(4),o(),r(5,"td"),n(6),o(),r(7,"td")(8,"a",10),c("click",function(){let s=L(t).$implicit,l=A();return U(l.showDialog(s.id))}),m(9,"i",11),o(),r(10,"a",12),n(11,"Edit"),o()()()}if(e&2){let t=k.$implicit;p(2),b(t.id),p(2),b(t.title),p(2),b(t.slug),p(4),a("routerLink",B(4,ut,t.id))}}var st=(()=>{class e{constructor(t){this.postser=t,this.PostListdata=[],this.PostsList=[],this.visible=!1,this.postquickedit=new Z({post_title:new T(""),post_id:new T("")})}ngOnInit(){this.postser.getPosts().subscribe(t=>{this.PostsList=t,this.createIdSlugArray()})}createIdSlugArray(){this.PostListdata=this.PostsList.map(t=>({id:t.id,slug:t.slug,title:t.title.rendered}))}showDialog(t){this.postser.getSinglePost(t).subscribe({next:i=>{this.postquickedit.patchValue({post_title:i?.title?.rendered||"",post_id:i.id}),this.visible=!0},error:i=>{console.error("Failed to fetch the post:",i)}})}onSubmit(){let t={id:this.postquickedit.value.post_id,title:this.postquickedit.value.post_title};this.postser.postQuickUpdate(this.postquickedit.value.post_id,t).subscribe(i=>{console.log(i)})}static{this.\u0275fac=function(i){return new(i||e)(d(w))}}static{this.\u0275cmp=f({type:e,selectors:[["app-postlist"]],decls:11,vars:9,consts:[[1,"card","m-2"],["styleClass","p-datatable-gridlines",1,"custom-table",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["header","Post Quick Edit",3,"visibleChange","modal","visible"],[3,"ngSubmit","formGroup"],["for","ptitle"],["id","ptitle","type","text","formControlName","post_title"],["id","post_id","type","hidden","formControlName","post_id"],["label","Submit","type","submit"],[3,"click"],[1,"pi","pi-file-edit"],[3,"routerLink"]],template:function(i,s){i&1&&(r(0,"div",0)(1,"p-table",1),V(2,ft,9,0,"ng-template",2)(3,ht,12,6,"ng-template",3),o()(),r(4,"p-dialog",4),R("visibleChange",function(F){return $(s.visible,F)||(s.visible=F),F}),r(5,"form",5),c("ngSubmit",function(){return s.onSubmit()}),r(6,"label",6),n(7,"Post Title:"),o(),m(8,"input",7)(9,"input",8)(10,"p-button",9),o()()),i&2&&(p(),a("value",s.PostListdata)("tableStyle",N(7,dt)),p(3),G(N(8,ct)),a("modal",!0),H("visible",s.visible),p(),a("formGroup",s.postquickedit))},dependencies:[tt,g,O,X,et,S,_,v,C,y,P]})}}return e})();var nt=(()=>{class e{constructor(t,i,s){this.fb=t,this.route=i,this.postservice=s,this.postForm=this.fb.group({post_title:["",I.required],post_content:["",I.required],post_id:[""]})}ngOnInit(){this.postId=Number(this.route.snapshot.paramMap.get("id"))||0,this.postservice.getSinglePost(this.postId).subscribe({next:t=>{this.postForm.patchValue({post_title:t?.title?.rendered||"",post_content:t?.content?.rendered||"",post_id:t.id})}})}onSubmit(){if(this.postForm.valid){let t={title:this.postForm.value.post_title,id:this.postForm.value.post_id};this.postservice.postUpdate(this.postForm.value.post_id,t).subscribe(i=>{console.log(i)})}}static{this.\u0275fac=function(i){return new(i||e)(d(J),d(Y),d(w))}}static{this.\u0275cmp=f({type:e,selectors:[["app-postedit"]],decls:12,vars:1,consts:[[1,"card","m-2"],[3,"ngSubmit","formGroup"],[1,"field","grid"],["for","post_title",1,"col-fixed",2,"width","100px"],["id","post_title","formControlName","post_title","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary"],["for","post_content",1,"col-fixed",2,"width","100px"],["rows","4","cols","50","id","post_content","formControlName","post_content",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary"],["type","hidden","formControlName","post_id"],["type","submit","label","Submit"]],template:function(i,s){i&1&&(r(0,"div",0)(1,"form",1),c("ngSubmit",function(){return s.onSubmit()}),r(2,"div",2)(3,"label",3),n(4,"Post Title:"),o(),m(5,"input",4),o(),r(6,"div",2)(7,"label",5),n(8,"Post Content:"),o(),m(9,"textarea",6),o(),m(10,"input",7)(11,"p-button",8),o()()),i&2&&(p(),a("formGroup",s.postForm))},dependencies:[g,S,_,v,C,y,P]})}}return e})();var bt=[{path:"",component:st},{path:"edit-post/:id",component:nt}],pt=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=u({imports:[M.forChild(bt),M]})}}return e})();var Ht=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=u({imports:[z,pt,it,W,K]})}}return e})();export{Ht as PostsModule};
